"use strict";angular.module("BluetoothApp",["ngResource"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",pageName:"Home",pageNode:1}).when("/device/:carrier/:manufacturer/:device/vehicle/:make/:year/:model/:radio/:navigation",{templateUrl:"views/main.html",controller:"MainCtrl",pageName:"Home"}).when("/device/:carrier/:manufacturer/:device",{templateUrl:"views/main.html",controller:"MainCtrl",pageName:"Home"}).when("/vehicle/:make/:year/:model/:radio/:navigation",{templateUrl:"views/main.html",controller:"MainCtrl",pageName:"Home"}).when("/devices",{templateUrl:"views/devices.html",controller:"DevicesCtrl",pageName:"Devices",pageNode:2}).otherwise({redirectTo:"/"})}]),angular.module("BluetoothApp").factory("WS",["$resource",function(a){var b="http://gmtotalconnect.com/Bluetooth/webresources/com.gm.bluetooth.v1.";return{Devices:{carriers:a(b+"Devices/getCarriers?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){return a.data.carriers}}}),manufacturers:a(b+"Devices/getManufacturers?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){return a.data.manufacturers}}}),devices:a(b+"Devices/getDevices?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){return a.data.devices}}}),compatible:a(b+"Devices/getCompatibleVehicles?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP"}}),info:a(b+"Devices/getDeviceVehicleInfo?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP"}})},Vehicles:{years:a(b+"Vehicles/getYears?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){var b=[];return angular.forEach(a.data.years,function(a){b.push({value:a})}),b}}}),makes:a(b+"Vehicles/getMakes?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){return a.data.makes}}}),models:a(b+"Vehicles/getModels?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){return a.data.models}}}),compatible:a(b+"Vehicles/getCompatibleDevices?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP"}}),info:a(b+"Vehicles/getDeviceVehicleInfo?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP"}})},Features:a(b+"Features/getFeatures?callback=JSON_CALLBACK",{},{get:{isArray:!0,cache:!0,method:"JSONP",transformResponse:function(a){return a.data.features}}})}}]),angular.module("BluetoothApp").directive("inert",function(){return{restrict:"A",link:function(a,b){b.on("click",function(a){a.preventDefault()})}}}),angular.module("BluetoothApp").controller("NavCtrl",["$scope","WS","$location","$routeParams",function(a,b,c,d){var e,f,g=function(){e=d.radio?{make:d.make,year:d.year,model:d.model,radio:d.radio}:{},f=d.device?{carrier:d.carrier,manufacturer:d.manufacturer,device:d.device}:{},a.carriers=b.Devices.carriers.get(e),a.makes=b.Vehicles.makes.get(f)};a.updateCarrier=function(){a.devices=[],a.manufacturer=void 0,a.device=void 0,a.manufacturers=b.Devices.manufacturers.get(angular.extend({carrier:a.carrier.name},e))},a.updateManufacturer=function(){a.device=void 0,a.devices=b.Devices.devices.get(angular.extend({carrier:a.carrier.name,manufacturer:a.manufacturer.name},e))},a.setDevice=function(){var e="";d.make&&(e="/vehicle/"+[d.make,d.year,d.model,d.radio,d.navigation].join("/")),c.path("/device/"+[a.carrier.name,a.manufacturer.name,a.device.name].join("/")+e),f={carrier:a.carrier.name,manufacturer:a.manufacturer.name,device:a.device.name},a.makes=b.Vehicles.makes.get(f)},a.updateMake=function(){a.models=[],a.year=void 0,a.model=void 0,a.radio=void 0,a._radio=void 0,a.years=b.Vehicles.years.get(angular.extend({make:a.make.name},f))},a.updateYear=function(){a.model=void 0,a.radio=void 0,a._radio=void 0,a.models=b.Vehicles.models.get(angular.extend({make:a.make.name,year:a.year.value},f))},a.updateModel=function(){a._radio=void 0,a.radio=void 0},a.updateRadio=function(){angular.forEach(a.model.radios,function(b){return a._radio===b.radioID?(a.radio=b,!1):void 0})},a.setVehicle=function(){var f="";d.device&&(f="/device/"+[d.carrier,d.manufacturer,d.device].join("/")),c.path(f+"/vehicle/"+[a.make.name,a.year.value,a.model.model,a.radio.typeRadio,"true"===a.radio.hasNavigation?"navigation":"noNavigation"].join("/")),e={make:a.make.name,year:a.year.value,model:a.model.model,radio:a.radio.typeRadio},a.carriers=b.Devices.carriers.get(e)},a.$on("$routeChangeSuccess",g)}]),angular.module("BluetoothApp").controller("MainCtrl",["$scope","$routeParams","WS",function(a,b,c){var d={};b.carrier&&(d.carrier=b.carrier),b.manufacturer&&(d.manufacturer=b.manufacturer),b.device&&(d.device=b.device),b.make&&(d.make=b.make),b.model&&(d.model=b.model),b.radio&&(d.radio=b.radio),b.year&&(d.year=b.year),(b.device||b.radio)&&(a.features=c.Features.get(d)),b.device&&!b.radio&&(a.compatible=c.Devices.compatible.get(d))}]),angular.module("BluetoothApp").controller("DevicesCtrl",["$scope","WS",function(a,b){a.devices=b.Devices.devices.get()}]),angular.module("BluetoothApp").controller("MenuCtrl",["$scope","$route",function(a,b){var c=function(){var c=[];angular.forEach(b.routes,function(a,b){"pageName"in a&&"pageNode"in a&&(c[a.pageNode]={name:a.pageName,path:b})}),a.routes=c};a.$on("$routeChangeSuccess",function(b,c){a.active=c.$$route.pageName}),c()}]);